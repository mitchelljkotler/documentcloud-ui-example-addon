
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>DocumentCloud UI Example Add-On</title>
  <meta name="description" content="A proof of concept for UI Add-Ons">
  <meta name="author" content="Mitchell Kotler">
</head>

<body>
  <p id="content"></p>
  <script>

    const url = "https://api.www.documentcloud.org/api/users/me/";

    fetch(url, { credentials: "include"})
      .then((response) => {
        if (response.ok) {
          response.json();
        } else {
          document.getElementById("content").innerHTML = "You are not authenticated";
        }
      })
      .then((data) => {
        if (data) {
          document.getElementById("content").innerHTML = "You are authenticated as " + data.username;
        }
      }).catch((err) => document.getElementById("content").innerHTML = "Error: check your CORS settings");

  </script>
</body>
</html>

